#!/bin/bash

declare -A conn_pairs

conn_pairs["test"]="vnagy@122.232.23.233"

[[ $1 == 'scp' ]] && SCP=1 || SCP=0

choice=$(echo ${!conn_pairs[@]} | tr ' ' '\n' | fzf)
[ -z $choice ] && echo "nothing chosen...exiting" && exit 1

if [ $SCP -eq 0 ]; then
    ssh ${conn_pairs[${choice}]}
    exit 0
fi

# else scp transfer

echo "1 : local => server"
echo "2 : server => local"
echo -n "Direction? (write number): "
read DIRECTION
echo -n "From: "
read FROM
echo -n "To: "
read TO

[ $DIRECTION -eq 1 ] \
    && echo "running scp -r $FROM ${conn_pairs[${choice}]}:$TO" \
    || echo "running scp -r ${conn_pairs[${choice}]}:$FROM $TO"

[ $DIRECTION -eq 1 ] \
    && scp -r $FROM ${conn_pairs[${choice}]}:$TO \
    || scp -r ${conn_pairs[${choice}]}:$FROM $TO
